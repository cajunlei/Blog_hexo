function switchCommentBarrage(){let e=window.localStorage.getItem("commentBarrageDisplay");document.getElementById("comment-barrage").style.display="false"===e?"block":"none",window.localStorage.setItem("commentBarrageDisplay","false"===e?"undefined":"false",864e5)}function share(){let e=window.location.origin+window.location.pathname;new ClipboardJS(".share",{text:function(){return"标题："+document.title+"\n链接："+e}}),btf.snackbarShow("本页链接已复制到剪切板，快去分享吧~")}function percent(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#go-up");n<=95?(o.childNodes[0].style.display="none",o.childNodes[1].style.display="block",o.childNodes[1].innerHTML=n):(o.childNodes[1].style.display="none",o.childNodes[0].style.display="block")}function switchNightMode(){document.querySelector("body").insertAdjacentHTML("beforeend",'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>'),setTimeout(function(){document.querySelector("body").classList.contains("DarkMode")?(document.querySelector("body").classList.remove("DarkMode"),localStorage.setItem("isDark","0"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-moon")):(document.querySelector("body").classList.add("DarkMode"),localStorage.setItem("isDark","1"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-sun")),setTimeout(function(){document.getElementsByClassName("Cuteen_DarkSky")[0].style.transition="opacity 3s",document.getElementsByClassName("Cuteen_DarkSky")[0].style.opacity="0",setTimeout(function(){document.getElementsByClassName("Cuteen_DarkSky")[0].remove()},1e3)},2e3)});const e="dark"===document.documentElement.getAttribute("data-theme")?"dark":"light";"light"===e?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night),document.getElementById("modeicon").setAttribute("xlink:href","#icon-sun")):(activateLightMode(),saveToLocal.set("theme","light",2),document.querySelector("body").classList.add("DarkMode"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-moon")),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout(()=>window.disqusReset(),200)}function page_title(){document.getElementById("page-name-text").style.display="/"===window.location.pathname||/^\/page\/[0-9]+\//.test(window.location.pathname),document.querySelector("#page-name-text").innerHTML=GLOBAL_CONFIG_SITE.title}function randomPost(){fetch("/sitemap.xml").then(e=>e.text()).then(e=>(new window.DOMParser).parseFromString(e,"text/xml")).then(e=>{let t,n,o=e.querySelectorAll("url loc");do{t=o[Math.floor(Math.random()*o.length)].innerHTML,n=t.split("/")[3]||""}while("posts"!==n);location.href=t})}function browserTC(){btf.snackbarShow(""),Snackbar.show({text:"浏览器版本较低，网站样式可能错乱",actionText:"关闭",duration:"6000",pos:"bottom-right"})}function browserVersion(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=(e.indexOf("Trident")>-1&&e.indexOf("rv:11.0"),e.indexOf("Edge")>-1&&!t),o=e.indexOf("Firefox")>-1,i=e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,d=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1&&-1==e.indexOf("Edge")&&-1==e.indexOf("OPR");e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")&&-1==e.indexOf("Edge")&&e.indexOf("OPR");n?e.split("Edge/")[1].split(".")[0]<90&&browserTC():o?e.split("Firefox/")[1].split(".")[0]<90&&browserTC():i?e.split("OPR/")[1].split(".")[0]<80&&browserTC():d&&e.split("Chrome/")[1].split(".")[0]<90&&browserTC()}function setCookies(e,t){let n=new Date((new Date).getTime()+24*t*60*60*1e3).toGMTString();for(let t in e)document.cookie=t+"="+e[t]+";expires="+n}function getCookie(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}window.onscroll=percent;var titleTime,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="w(ﾟДﾟ)w 不要走！再看看嘛！",clearTimeout(titleTime)):(document.title="♪(^∇^*)欢迎肥来！"+OriginTitile,titleTime=setTimeout(function(){document.title=OriginTitile},2e3))}),window.onscroll=page_title,1!=getCookie("browsertc")&&(setCookies({browsertc:1},1),browserVersion());